<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ Qix - SGGameSite</title>
    <link rel="stylesheet" href="../../shared/css/common.css">
    <link rel="stylesheet" href="../../shared/css/game-base.css">

    <!-- éŸ³éŸ¿ã‚·ã‚¹ãƒ†ãƒ  -->
    <script src="../../shared/js/audio-system.js"></script>

    <style>
        /* Qixã‚²ãƒ¼ãƒ å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ« - ç´«ç³»ãƒ†ãƒ¼ãƒ */
        .game-title {
            color: #8A2BE2;
            text-shadow: 2px 2px 4px rgba(138, 43, 226, 0.3);
        }

        #gameCanvas {
            border: 3px solid #8A2BE2;
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.3);
            background: #000;
        }

        .btn {
            background: #8A2BE2;
            border: 2px solid #7B68EE;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            margin: 5px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            background: #7B68EE;
            box-shadow: 0 6px 12px rgba(138, 43, 226, 0.4);
        }

        .btn-large {
            font-size: 18px;
            padding: 15px 30px;
        }

        .btn-secondary {
            background: #9370DB;
            border-color: #8A2BE2;
        }

        .btn-secondary:hover {
            background: #8A2BE2;
        }

        .game-stats .stat-item {
            background: rgba(138, 43, 226, 0.1);
            border: 1px solid #8A2BE2;
        }

        .game-stats .stat-label {
            color: #8A2BE2;
        }

        .controls-info {
            background: rgba(147, 112, 219, 0.1);
            border: 2px solid #9370DB;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }

        .controls-info h4 {
            color: #8A2BE2;
            margin-bottom: 10px;
        }

        .mobile-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .mobile-controls .btn {
            font-size: 20px;
            padding: 10px 15px;
            min-width: 60px;
        }

        .game-control {
            text-align: center;
            margin: 10px 0;
        }

        .game-control button {
            background: #9370DB;
            border: 2px solid #8A2BE2;
            color: white;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 0 5px;
            transition: all 0.3s;
        }

        .game-control button:hover {
            background: #8A2BE2;
        }

        .game-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .game-screen-content {
            background: linear-gradient(135deg, #F8F8FF, #E6E6FA);
            border: 3px solid #8A2BE2;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 0 30px rgba(138, 43, 226, 0.5);
        }

        .game-screen h2 {
            color: #8A2BE2;
            margin-bottom: 20px;
            font-size: 32px;
        }

        .game-screen p {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .score-display {
            font-size: 24px;
            font-weight: bold;
            color: #8A2BE2;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .game-title-screen {
                font-size: 24px;
            }

            #gameCanvas {
                max-width: 100%;
                height: auto;
            }

            .mobile-controls {
                display: flex;
            }
        }

        @media (min-width: 769px) {
            .mobile-controls {
                display: none;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="header">
            <div class="header-content">
                <h1 class="site-title">ğŸ® SGGameSite</h1>
                <p class="site-subtitle">ç„¡æ–™ã‚²ãƒ¼ãƒ ã‚µã‚¤ãƒˆ</p>
            </div>
        </header>

        <!-- ãƒ‘ãƒ³ããšãƒŠãƒ“ -->
        <nav class="breadcrumb">
            <span><a href="../../index.html">ãƒ›ãƒ¼ãƒ </a></span> >
            <span>Qix</span>
        </nav>

        <!-- ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ« -->
        <div class="game-title-section">
            <h2 class="game-title">ğŸ¯ Qix</h2>
            <p class="game-subtitle">é™£å–ã‚Šãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ </p>
        </div>

        <!-- ã‚²ãƒ¼ãƒ æ¦‚è¦ -->
        <div class="game-overview">
            <h3>ã‚²ãƒ¼ãƒ æ¦‚è¦</h3>
            <p>å¢ƒç•Œç·šã‹ã‚‰ç·šã‚’å¼•ã„ã¦é ˜åŸŸã‚’å›²ã¿ã€75%ä»¥ä¸Šã®é™£åœ°ã‚’ç²å¾—ã™ã‚‹ã¨ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¯ãƒªã‚¢ï¼æ•µã®Qixã‚„Sparkã‚’é¿ã‘ãªãŒã‚‰ã€æˆ¦ç•¥çš„ã«é™£åœ°ã‚’åºƒã’ã¦ã„ããƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ã§ã™ã€‚</p>
        </div>

        <!-- æ“ä½œèª¬æ˜ -->
        <div class="controls-info">
            <h4>ğŸ® æ“ä½œæ–¹æ³•</h4>
            <ul>
                <li><strong>çŸ¢å°ã‚­ãƒ¼</strong>ï¼šç§»å‹•</li>
                <li><strong>å¢ƒç•Œç·šä¸Š</strong>ï¼šå®‰å…¨ã«ç§»å‹•å¯èƒ½</li>
                <li><strong>å¢ƒç•Œç·šå¤–</strong>ï¼šç·šã‚’å¼•ã„ã¦é ˜åŸŸã‚’ä½œã‚‹</li>
            </ul>
        </div>

        <!-- ã‚²ãƒ¼ãƒ çµ±è¨ˆ -->
        <div class="game-stats">
            <div class="stat-item">
                <div class="stat-label">ã‚¹ã‚³ã‚¢</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">ãƒ¬ãƒ™ãƒ«</div>
                <div class="stat-value" id="level">1</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">é ˜åŸŸ</div>
                <div class="stat-value" id="territory">0%</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">ç›®æ¨™</div>
                <div class="stat-value" id="targetTerritory">75%</div>
            </div>
        </div>

        <!-- ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
        <div class="game-control">
            <button id="startBtn">ğŸ® é–‹å§‹</button>
            <button id="pauseBtn" style="display: none;">â¸ï¸</button>
            <button id="resetBtn">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
            <button id="howToPlayBtn">â“ éŠã³æ–¹</button>
        </div>

        <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
        <div class="game-area">
            <canvas id="gameCanvas" width="600" height="400"></canvas>
        </div>

        <!-- ãƒ¢ãƒã‚¤ãƒ«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
        <div class="mobile-controls">
            <button id="upButton" class="btn">â¬†ï¸</button>
            <button id="downButton" class="btn">â¬‡ï¸</button>
            <button id="leftButton" class="btn">â¬…ï¸</button>
            <button id="rightButton" class="btn">â¡ï¸</button>
        </div>

        <!-- ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒ†ãƒŠ -->
        <div class="game-container">
            <div class="game-rules">
                <h3>ğŸ¯ ã‚²ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ«</h3>
                <ul>
                    <li>å¢ƒç•Œç·šä¸Šã‚’ç§»å‹•ã—ã¦å®‰å…¨ã‚’ä¿ã¤</li>
                    <li>å¢ƒç•Œç·šã‹ã‚‰é›¢ã‚Œã‚‹ã¨ç·šã‚’å¼•ãå§‹ã‚ã‚‹</li>
                    <li>ç·šã‚’å¼•ã„ã¦é ˜åŸŸã‚’å›²ã‚€ã¨é™£åœ°ã«ãªã‚‹</li>
                    <li>75%ä»¥ä¸Šã®é™£åœ°ã‚’ç²å¾—ã™ã‚Œã°ã‚¯ãƒªã‚¢</li>
                    <li>æ•µã«è§¦ã‚Œã‚‹ã¨ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼</li>
                </ul>
            </div>

            <div class="game-tips">
                <h3>ğŸ”¥ æ”»ç•¥ã®ã‚³ãƒ„</h3>
                <ul>
                    <li>å°ã•ãªå®‰å…¨ãªé ˜åŸŸã‹ã‚‰å§‹ã‚ã‚ˆã†</li>
                    <li>æ•µã®å‹•ãã‚’è¦³å¯Ÿã—ã¦ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¨ˆã‚‹</li>
                    <li>å¢ƒç•Œç·šã«ã„ã‚‹æ™‚ã¯æ¯”è¼ƒçš„å®‰å…¨</li>
                    <li>ç·šã‚’å¼•ãæ™‚ã¯ç´ æ—©ãç§»å‹•ã—ã‚ˆã†</li>
                </ul>
            </div>

            <div class="back-link">
                <a href="../../index.html" class="btn">â† ã‚²ãƒ¼ãƒ ä¸€è¦§ã«æˆ»ã‚‹</a>
            </div>
        </div>
    </div>

    <!-- ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ -->
    <div id="gameOverScreen" class="game-screen" style="display: none;">
        <div class="game-screen-content">
            <h2 id="gameOverTitle">ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼</h2>
            <p id="gameOverMessage">Qixã«æ•ã¾ã£ã¦ã—ã¾ã„ã¾ã—ãŸï¼</p>
            <div class="score-display">
                <p>ã‚¹ã‚³ã‚¢: <span id="finalScore">0</span>ç‚¹</p>
                <p>ãƒ¬ãƒ™ãƒ«: <span id="finalLevel">1</span></p>
                <p>å æœ‰ç‡: <span id="finalTerritory">0%</span></p>
            </div>
            <button id="restartBtn" class="btn btn-large">ğŸ”„ ã‚‚ã†ä¸€åº¦</button>
        </div>
    </div>

    <!-- éŠã³æ–¹ãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
    <div id="howToPlayDialog" class="game-screen" style="display: none;">
        <div class="game-screen-content">
            <h2>ğŸ¯ Qix - éŠã³æ–¹</h2>
            <div style="text-align: left; max-width: 500px;">
                <h4>ğŸ® åŸºæœ¬ãƒ«ãƒ¼ãƒ«</h4>
                <ul>
                    <li>å¢ƒç•Œç·šï¼ˆç™½ã„ç·šï¼‰ä¸Šã‚’ç§»å‹•ã§ãã¾ã™</li>
                    <li>å¢ƒç•Œç·šã‹ã‚‰é›¢ã‚Œã‚‹ã¨ç·šã‚’å¼•ãå§‹ã‚ã¾ã™</li>
                    <li>ç·šã‚’å¼•ã„ã¦é ˜åŸŸã‚’å›²ã‚€ã¨é™£åœ°ã«ãªã‚Šã¾ã™</li>
                    <li>75%ä»¥ä¸Šã®é™£åœ°ã‚’ç²å¾—ã™ã‚‹ã¨ã‚¯ãƒªã‚¢ï¼</li>
                </ul>

                <h4>âš¡ æ•µã«ã¤ã„ã¦</h4>
                <ul>
                    <li><strong>Qix:</strong> ä¸­å¤®ã‚¨ãƒªã‚¢ã‚’å‹•ãå›ã‚‹æ•µ</li>
                    <li><strong>Spark:</strong> å¢ƒç•Œç·šã‚’ç§»å‹•ã™ã‚‹é›»å…‰</li>
                    <li>ã©ã¡ã‚‰ã‚‚æ¥è§¦ã™ã‚‹ã¨ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼</li>
                </ul>

                <h4>ğŸ† å¾—ç‚¹ã‚·ã‚¹ãƒ†ãƒ </h4>
                <ul>
                    <li>å›²ã‚“ã é ˜åŸŸã®å¤§ãã•ã«å¿œã˜ã¦å¾—ç‚¹</li>
                    <li>å¤§ããªé ˜åŸŸã‚’ä¸€åº¦ã«å›²ã‚€ã¨é«˜å¾—ç‚¹</li>
                    <li>ãƒ¬ãƒ™ãƒ«ãŒä¸ŠãŒã‚‹ã¨æ•µãŒå¢—åŠ </li>
                </ul>
            </div>
            <button id="closeDialog" class="btn btn-large">âœ• é–‰ã˜ã‚‹</button>
        </div>
    </div>

    <script src="qix-game.js"></script>

    <script>
        // ã‚²ãƒ¼ãƒ åˆæœŸåŒ–
        let qixGame;

        document.addEventListener('DOMContentLoaded', () => {
            // éŸ³éŸ¿ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
            if (window.audioSystem) {
                window.audioSystem.init();
            }

            // ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
            qixGame = new QixGame();

            // ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
            document.getElementById('startBtn').addEventListener('click', () => {
                qixGame.startGame();
                document.getElementById('startBtn').style.display = 'none';
                document.getElementById('pauseBtn').style.display = 'inline-block';
            });

            document.getElementById('pauseBtn').addEventListener('click', () => {
                qixGame.togglePause();
            });

            document.getElementById('resetBtn').addEventListener('click', () => {
                qixGame.resetGame();
                document.getElementById('startBtn').style.display = 'inline-block';
                document.getElementById('pauseBtn').style.display = 'none';
            });

            document.getElementById('howToPlayBtn').addEventListener('click', () => {
                document.getElementById('howToPlayDialog').style.display = 'flex';
            });

            document.getElementById('closeDialog').addEventListener('click', () => {
                document.getElementById('howToPlayDialog').style.display = 'none';
            });

            document.getElementById('restartBtn').addEventListener('click', () => {
                qixGame.startGame();
                document.getElementById('gameOverScreen').style.display = 'none';
                document.getElementById('startBtn').style.display = 'none';
                document.getElementById('pauseBtn').style.display = 'inline-block';
            });

            // ãƒ¢ãƒã‚¤ãƒ«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
            document.getElementById('upButton').addEventListener('click', () => {
                qixGame.keys.up = true;
                setTimeout(() => qixGame.keys.up = false, 150);
            });

            document.getElementById('downButton').addEventListener('click', () => {
                qixGame.keys.down = true;
                setTimeout(() => qixGame.keys.down = false, 150);
            });

            document.getElementById('leftButton').addEventListener('click', () => {
                qixGame.keys.left = true;
                setTimeout(() => qixGame.keys.left = false, 150);
            });

            document.getElementById('rightButton').addEventListener('click', () => {
                qixGame.keys.right = true;
                setTimeout(() => qixGame.keys.right = false, 150);
            });
        });
    </script>
</body>

</html>
